(this.webpackJsonptasklist=this.webpackJsonptasklist||[]).push([[0],{37:function(t,n,e){},57:function(t,n,e){},63:function(t,n,e){},64:function(t,n,e){},66:function(t,n,e){"use strict";e.r(n);var c=e(1),a=e(0),r=e.n(a),s=e(12),i=e.n(s),u=(e(37),e(2)),o=e.n(u),f=e(6),j=e(7),l=e(4),d=e.n(l),b=e(15),p=e.n(b),O=e(14),x=e.n(O),k=e(30),h=e.n(k),v=e(29),m=e.n(v),w=e(27),y=e.n(w),g=e(26),C=e.n(g),N=e(24),S=e.n(N),T=e(28),E=e.n(T),L=(e(57),function(t){var n=t.task,e=t.subtasks,s=t.fetchTasks,i=Object(a.useState)(n.duration),u=Object(j.a)(i,2),l=u[0],b=u[1],O=Object(a.useState)(!1),k=Object(j.a)(O,2),v=k[0],w=k[1],g=Object(a.useState)(""),N=Object(j.a)(g,2),T=N[0],L=N[1],I=Object(a.useState)(!1),M=Object(j.a)(I,2),B=M[0],J=M[1],R=r.a.useRef(null);Object(a.useEffect)((function(){return window.addEventListener("beforeunload",z),function(){return window.removeEventListener("beforeunload",z)}}));var z=function(){return navigator.sendBeacon("/tasks/".concat(n.id,"/").concat(l))},D=function(){clearInterval(R.current),w(!1),_()},_=function(){var t=Object(f.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.post("/tasks/".concat(n.id,"/").concat(l));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),q=function(){var t=Object(f.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.post("/subtasks/".concat(n.id),{content:T});case 2:L(""),s();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=Object(f.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return D(),t.next=3,d.a.patch("/tasks/".concat(n.id),{completed:!n.completed});case 3:s();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),F=function(){var t=Object(f.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.delete("/tasks/".concat(n.id));case 2:s();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),G=function(){var t=Object(f.a)(o.a.mark((function t(n,e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.patch("/subtasks/".concat(n),{completed:!e});case 2:s();case 3:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),H=function(){var t=Object(f.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.delete("/subtasks/".concat(n));case 2:s();case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),K=function(){return B?Object(c.jsx)(S.a,{id:"icon",onClick:function(){return J(!B)}}):Object(c.jsx)(C.a,{id:"icon",onClick:function(){return J(!B)}})},P=function(){return n.completed?Object(c.jsx)(y.a,{id:"icon",onClick:function(){return A()}}):Object(c.jsx)(x.a,{id:"icon",onClick:function(){return A()}})},Q=function(t){var n=t.subtask;return n.completed?Object(c.jsx)(E.a,{id:"icon",onClick:function(){return G(n.id,n.completed)}}):Object(c.jsx)(x.a,{id:"icon",onClick:function(){return G(n.id,n.completed)}})},U=function(){return v&&!n.completed?Object(c.jsx)(m.a,{id:"icon",onClick:function(){return D()}}):Object(c.jsx)(h.a,{id:"icon",onClick:function(){return w(!0),void(R.current=setInterval((function(){if(l<=0)return b(0),void D();b((function(t){return t-1}))}),1e3))}})};return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"task-item",children:[Object(c.jsxs)("div",{style:{display:"flex"},children:[Object(c.jsx)(K,{}),Object(c.jsx)("div",{style:{textTransform:"capitalize"},children:n.content})]}),Object(c.jsxs)("div",{style:{display:"flex"},children:[Object(c.jsx)(P,{}),Object(c.jsx)(U,{}),!n.completed&&Object(c.jsx)("div",{children:function(t){var n="0".concat(t%60).slice(-2),e="".concat(Math.floor(t/60)),c="0".concat(+e%60).slice(-2),a="0".concat(Math.floor(t/3600)).slice(-2);return"".concat(a,":").concat(c,":").concat(n)}(l)}),Object(c.jsx)(p.a,{id:"icon",onClick:function(){return F()}})]})]}),B&&Object(c.jsxs)("div",{children:[e.map((function(t){return Object(c.jsxs)("div",{style:{textDecoration:t.completed?"line-through 2px":""},className:"subtask",children:[t.content,Object(c.jsxs)("div",{children:[Object(c.jsx)(Q,{subtask:t}),Object(c.jsx)(p.a,{id:"icon",onClick:function(){return H(t.id)}})]})]},t.id)})),Object(c.jsxs)("div",{className:"subtask-input-container",children:[Object(c.jsx)("input",{type:"text",className:"subtask-input",onChange:function(t){return L(t.target.value)},value:T}),Object(c.jsx)("button",{className:"subtask-submit-btn",onClick:function(){return q()},children:"Lis\xe4\xe4 teht\xe4v\xe4"})]})]})]})}),I=(e(63),function(t){var n=t.tasks,e=t.subtasks,a=t.fetchTasks;return Object(c.jsx)("div",{children:n.map((function(t){return Object(c.jsx)(L,{fetchTasks:a,subtasks:e.filter((function(n){return n.task_id===t.id})),task:t},t.id)}))})});e(64);var M=function(){var t=Object(a.useState)([]),n=Object(j.a)(t,2),e=n[0],r=n[1],s=Object(a.useState)([]),i=Object(j.a)(s,2),u=i[0],l=i[1],b=Object(a.useState)(""),p=Object(j.a)(b,2),O=p[0],x=p[1],k=Object(a.useState)(0),h=Object(j.a)(k,2),v=h[0],m=h[1],w=function(){var t=Object(f.a)(o.a.mark((function t(){var n,e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/tasks");case 2:return n=t.sent,t.next=5,d.a.get("/subtasks");case 5:e=t.sent,l(e.data),r(n.data);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(){var t=Object(f.a)(o.a.mark((function t(n,e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(O.length>0)){t.next=6;break}return t.next=3,d.a.post("/tasks",{content:n,duration:e});case 3:w(),x(""),m(0);case 6:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){w()}),[]),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(I,{fetchTasks:w,subtasks:u,tasks:e.filter((function(t){return!t.completed}))}),Object(c.jsx)(I,{fetchTasks:w,subtasks:u,tasks:e.filter((function(t){return t.completed}))}),Object(c.jsxs)("div",{className:"inputs",children:[Object(c.jsx)("input",{value:O,type:"text",placeholder:"Lis\xe4\xe4 teht\xe4v\xe4",className:"content-input",onChange:function(t){return x(t.target.value)}}),Object(c.jsx)("input",{value:v,type:"number",className:"duration-input",onChange:function(t){return m(+t.target.value)}}),Object(c.jsx)("span",{style:{margin:"auto",paddingRight:10},children:"min"}),Object(c.jsx)("button",{style:{height:38,margin:"auto"},className:"button",onClick:function(){return y(O,60*v)},children:"Lis\xe4\xe4"})]})]})};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(M,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.aa13873f.chunk.js.map